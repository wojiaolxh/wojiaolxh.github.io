<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>勿忘的博客</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/avatar.png">
    <meta name="description" content="网站描述">
    
    <link rel="preload" href="/assets/css/0.styles.b23bcaa9.css" as="style"><link rel="preload" href="/assets/js/app.f1c655d9.js" as="script"><link rel="preload" href="/assets/js/2.5f75bc7c.js" as="script"><link rel="preload" href="/assets/js/6.7e1392e3.js" as="script"><link rel="prefetch" href="/assets/js/10.a71d7304.js"><link rel="prefetch" href="/assets/js/11.6f94e497.js"><link rel="prefetch" href="/assets/js/12.0d179624.js"><link rel="prefetch" href="/assets/js/13.e9a89278.js"><link rel="prefetch" href="/assets/js/14.7d41ea20.js"><link rel="prefetch" href="/assets/js/15.c14d442c.js"><link rel="prefetch" href="/assets/js/16.8a2ee272.js"><link rel="prefetch" href="/assets/js/17.a683bc65.js"><link rel="prefetch" href="/assets/js/18.7bd3e1ed.js"><link rel="prefetch" href="/assets/js/19.0d723740.js"><link rel="prefetch" href="/assets/js/20.d18ca8a4.js"><link rel="prefetch" href="/assets/js/21.22b75bfe.js"><link rel="prefetch" href="/assets/js/22.7e6fb782.js"><link rel="prefetch" href="/assets/js/23.9002abe0.js"><link rel="prefetch" href="/assets/js/24.7e00f53a.js"><link rel="prefetch" href="/assets/js/25.c9dbf47b.js"><link rel="prefetch" href="/assets/js/26.f116f6c6.js"><link rel="prefetch" href="/assets/js/27.553a66cd.js"><link rel="prefetch" href="/assets/js/28.a17b96a4.js"><link rel="prefetch" href="/assets/js/29.5b6ed7a7.js"><link rel="prefetch" href="/assets/js/3.b77b1dc1.js"><link rel="prefetch" href="/assets/js/30.cdb3c8c7.js"><link rel="prefetch" href="/assets/js/31.6280fb91.js"><link rel="prefetch" href="/assets/js/32.0ef13458.js"><link rel="prefetch" href="/assets/js/33.d5779eeb.js"><link rel="prefetch" href="/assets/js/34.7375a1d9.js"><link rel="prefetch" href="/assets/js/35.b6854634.js"><link rel="prefetch" href="/assets/js/36.4c72afe9.js"><link rel="prefetch" href="/assets/js/37.c4b38050.js"><link rel="prefetch" href="/assets/js/4.053c9f86.js"><link rel="prefetch" href="/assets/js/5.3a29ffe9.js"><link rel="prefetch" href="/assets/js/7.1f0c4561.js"><link rel="prefetch" href="/assets/js/8.31476672.js"><link rel="prefetch" href="/assets/js/9.40c7d040.js">
    <link rel="stylesheet" href="/assets/css/0.styles.b23bcaa9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.png" alt="勿忘的博客" class="logo"> <span class="site-name can-hide">勿忘的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端积累" class="dropdown-title"><span class="title">前端积累</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端积累" class="mobile-dropdown-title"><span class="title">前端积累</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fontend/html/" class="nav-link router-link-active">
  html css积累
</a></li><li class="dropdown-item"><!----> <a href="/fontend/js/DebounceAndThrottle.html" class="nav-link">
  javascript积累
</a></li><li class="dropdown-item"><!----> <a href="/fontend/vue/" class="nav-link">
  vue积累
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  前端算法
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端积累" class="dropdown-title"><span class="title">前端积累</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端积累" class="mobile-dropdown-title"><span class="title">前端积累</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/fontend/html/" class="nav-link router-link-active">
  html css积累
</a></li><li class="dropdown-item"><!----> <a href="/fontend/js/DebounceAndThrottle.html" class="nav-link">
  javascript积累
</a></li><li class="dropdown-item"><!----> <a href="/fontend/vue/" class="nav-link">
  vue积累
</a></li></ul></div></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  前端算法
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>html</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/fontend/html/" aria-current="page" class="sidebar-link">目录</a></li><li><a href="/fontend/html/BrowserInputUrl.html" aria-current="page" class="active sidebar-link">浏览器输入URL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_1-url" class="sidebar-link">1. URL</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_2-缓存" class="sidebar-link">2. 缓存</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_3-dns域名解析" class="sidebar-link">3. DNS域名解析</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_4-tcp连接" class="sidebar-link">4. TCP连接</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_5-浏览器向服务器发送http请求" class="sidebar-link">5. 浏览器向服务器发送HTTP请求</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_6-浏览器接收服务器的响" class="sidebar-link">6. 浏览器接收服务器的响</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_7-页面渲染" class="sidebar-link">7. 页面渲染</a></li><li class="sidebar-sub-header"><a href="/fontend/html/BrowserInputUrl.html#_8-关闭tcp连接或继续保持连接" class="sidebar-link">8. 关闭TCP连接或继续保持连接</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>css</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器输入url"><a href="#浏览器输入url" class="header-anchor">#</a> 浏览器输入URL</h1> <h3 id="一个页面从输入-url-到页面加载显示完成-这个过程中都发生了什么"><a href="#一个页面从输入-url-到页面加载显示完成-这个过程中都发生了什么" class="header-anchor">#</a> 一个页面从输入 URL 到页面加载显示完成，这个过程中都发生了什么？</h3> <ol><li>浏览器的地址栏输入URL并按下回车。</li> <li>浏览器查找当前URL是否存在缓存，并比较缓存是否过期。</li> <li>DNS解析URL对应的IP。</li> <li>根据IP建立TCP连接（三次握手）。</li> <li>HTTP发起请求。</li> <li>服务器处理请求，浏览器接收HTTP响应。</li> <li>渲染页面，构建DOM树。</li> <li>关闭TCP连接（四次挥手）。</li></ol> <h2 id="_1-url"><a href="#_1-url" class="header-anchor">#</a> 1. URL</h2> <p>输入URL后，会进行解析（URL的本质就是统一资源定位符）
URL一般包括几大部分：</p> <ul><li>protocol，协议头，譬如有http，加密的https，ftp等</li> <li>host，主机域名或IP地址</li> <li>port，端口号（通常端口号不常见是因为大部分的都是使用默认的端口所以隐藏，如HTTP默认端口80，HTTPS默认端口443。）</li> <li>path，目录路径</li> <li>query，即查询参数</li> <li>fragment，即#后的hash值，一般用来定位到某个位置</li></ul> <h2 id="_2-缓存"><a href="#_2-缓存" class="header-anchor">#</a> 2. 缓存</h2> <p>根据下图的逻辑，判断是直接使用缓存内容还是重新向服务器请求资源
<img src="/assets/img/Cache.88e0c2c8.png" alt="markdown" title="markdown"></p> <h2 id="_3-dns域名解析"><a href="#_3-dns域名解析" class="header-anchor">#</a> 3. DNS域名解析</h2> <p>我们知道在地址栏输入的域名并不是最后资源所在的真实位置，域名只是与IP地址的一个映射。网络服务器的IP地址那么多，我们不可能去记一串串的数字，因此域名就产生了，<strong>域名解析的过程实际是将域名还原为IP地址的过程</strong>。
首先浏览器先检查本地hosts文件是否有这个网址映射关系，如果有就调用这个IP地址映射，完成域名解析。</p> <p>如果没找到则会查找本地DNS解析器缓存，如果查找到则返回。</p> <p>如果还是没有找到则会查找本地DNS服务器，如果查找到则返回。</p> <p>最后迭代查询，按根域服务器 -&gt;顶级域,.com-&gt;第二层域，baidu.com -&gt;子域，www.baidu.com的顺序找到IP地址。</p> <h2 id="_4-tcp连接"><a href="#_4-tcp连接" class="header-anchor">#</a> 4. TCP连接</h2> <p>在通过第一步的DNS域名解析后，获取到了服务器的IP地址，在获取到IP地址后，便会开始建立一次连接，这是由TCP协议完成的，主要通过三次握手进行连接。</p> <ul><li><p>第一次握手： 建立连接时，客户端发送syn包（seq=x）到服务器，并进入SYN_SENT状态，等待服务器确认；</p></li> <li><p>第二次握手： 服务器收到syn包，必须确认客户的SYN（ack=x+1），同时自己也发送一个SYN包（seq=y），即SYN+ACK包，此时服务器进入SYN_RECV状态；</p></li> <li><p>第三次握手： 客户端收到服务器的SYN+ACK包，向服务器发送确认包ACK(ack=y+1），此包发送完毕，客户端和服务器进入ESTABLISHED（TCP连接成功）状态，完成三次握手。</p></li></ul> <h2 id="_5-浏览器向服务器发送http请求"><a href="#_5-浏览器向服务器发送http请求" class="header-anchor">#</a> 5. 浏览器向服务器发送HTTP请求</h2> <p>完整的HTTP请求包含请求起始行、请求头部、请求主体三部分。
常用的请求头部（部分）</p> <div class="language-js extra-class"><pre class="language-js"><code>Accept<span class="token operator">:</span> 接收类型，表示浏览器支持的<span class="token constant">MIME</span>类型
（对标服务端返回的Content<span class="token operator">-</span>Type）
Accept<span class="token operator">-</span>Encoding：浏览器支持的压缩类型<span class="token punctuation">,</span>如gzip等<span class="token punctuation">,</span>超出类型不能接收
Content<span class="token operator">-</span>Type：客户端发送出去实体内容的类型
Cache<span class="token operator">-</span>Control<span class="token operator">:</span> 指定请求和响应遵循的缓存机制，如no<span class="token operator">-</span>cache
If<span class="token operator">-</span>Modified<span class="token operator">-</span>Since：对应服务端的Last<span class="token operator">-</span>Modified，用来匹配看文件是否变动，只能精确到<span class="token number">1</span>s之内，http1<span class="token punctuation">.</span><span class="token number">0</span>中
Expires：缓存控制，在这个时间内不会请求，直接使用缓存，http1<span class="token punctuation">.</span><span class="token number">0</span>，而且是服务端时间
Max<span class="token operator">-</span>age：代表资源在本地缓存多少秒，有效时间内不会请求，而是使用缓存，http1<span class="token punctuation">.</span><span class="token number">1</span>中
If<span class="token operator">-</span>None<span class="token operator">-</span>Match：对应服务端的ETag，用来匹配文件内容是否改变（非常精确），http1<span class="token punctuation">.</span><span class="token number">1</span>中
Cookie<span class="token operator">:</span> 有cookie并且同域访问时会自动带上
Connection<span class="token operator">:</span> 当浏览器与服务器通信时对于长连接如何进行处理<span class="token punctuation">,</span>如keep<span class="token operator">-</span>alive
Host：请求的服务器<span class="token constant">URL</span>
Origin：最初的请求是从哪里发起的（只会精确到端口）<span class="token punctuation">,</span>Origin比Referer更尊重隐私
Referer：该页面的来源<span class="token constant">URL</span><span class="token punctuation">(</span>适用于所有类型的请求，会精确到详细页面地址，csrf拦截常用到这个字段<span class="token punctuation">)</span>
User<span class="token operator">-</span>Agent：用户客户端的一些必要信息，如<span class="token constant">UA</span>头部等
</code></pre></div><h2 id="_6-浏览器接收服务器的响"><a href="#_6-浏览器接收服务器的响" class="header-anchor">#</a> 6. 浏览器接收服务器的响</h2> <p>服务器在收到浏览器发送的HTTP请求之后，会将收到的HTTP报文封装成HTTP的Request对象，并通过不同的Web服务器进行处理，处理完的结果以HTTP的Response对象返回，主要包括状态码，响应头，响应报文三个部分。
状态码主要包括以下部分</p> <ul><li>1xx：指示信息–表示请求已接收，继续处理。</li> <li>2xx：成功–表示请求已被成功接收、理解、接受。</li> <li>3xx：重定向–要完成请求必须进行更进一步的操作。</li> <li>4xx：客户端错误–请求有语法错误或请求无法实现。</li> <li>5xx：服务器端错误–服务器未能实现合法的请求。</li></ul> <p>响应头主要由Cache-Control、 Connection、Date、Pragma等组成。</p> <p>响应体为服务器返回给浏览器的信息，主要由HTML，css，js，图片文件组成。</p> <p>常用的响应头部（部分）：</p> <div class="language-js extra-class"><pre class="language-js"><code>Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Headers<span class="token operator">:</span> 服务器端允许的请求Headers
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Methods<span class="token operator">:</span> 服务器端允许的请求方法
Access<span class="token operator">-</span>Control<span class="token operator">-</span>Allow<span class="token operator">-</span>Origin<span class="token operator">:</span> 服务器端允许的请求Origin头部（譬如为<span class="token operator">*</span>）
Content<span class="token operator">-</span>Type：服务端返回的实体内容的类型
Date：数据从服务器发送的时间
Cache<span class="token operator">-</span>Control：告诉浏览器或其他客户，什么环境可以安全的缓存文档
Last<span class="token operator">-</span>Modified：请求资源的最后修改时间
Expires：应该在什么时候认为文档已经过期<span class="token punctuation">,</span>从而不再缓存它
Max<span class="token operator">-</span>age：客户端的本地资源应该缓存多少秒，开启了Cache<span class="token operator">-</span>Control后有效
ETag：请求变量的实体标签的当前值
Set<span class="token operator">-</span>Cookie：设置和页面关联的cookie，服务器通过这个头部把cookie传给客户端
Keep<span class="token operator">-</span>Alive：如果客户端有keep<span class="token operator">-</span>alive，服务端也会有响应（如timeout<span class="token operator">=</span><span class="token number">38</span>）
Server：服务器的一些相关信息
</code></pre></div><h2 id="_7-页面渲染"><a href="#_7-页面渲染" class="header-anchor">#</a> 7. 页面渲染</h2> <p>前面有提到http交互，那么接下来就是浏览器获取到html，然后解析，渲染</p> <ol><li>解析HTML，构建DOM树</li> <li>解析CSS，生成CSS规则树</li> <li>合并DOM树和CSS规则，生成render树</li> <li>布局render树（Layout/reflow），负责各元素尺寸、位置的计算</li> <li>绘制render树（paint），绘制页面像素信息</li> <li>浏览器会将各层的信息发送给GPU，GPU会将各层合成（composite），显示在屏幕上</li></ol> <h2 id="_8-关闭tcp连接或继续保持连接"><a href="#_8-关闭tcp连接或继续保持连接" class="header-anchor">#</a> 8. 关闭TCP连接或继续保持连接</h2> <p>通过四次挥手关闭连接(FIN ACK, ACK, FIN ACK, ACK)。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/fontend/html/" class="prev router-link-active">
        目录
      </a></span> <span class="next"><a href="/fontend/css/">
        目录
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f1c655d9.js" defer></script><script src="/assets/js/2.5f75bc7c.js" defer></script><script src="/assets/js/6.7e1392e3.js" defer></script>
  </body>
</html>
